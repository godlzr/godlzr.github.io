<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    

    <title>
      Differences between sending cv::Mat, const cv::Mat, const cv::Mat&amp; or cv::Mat&amp; as arguments to a function | 里士满路1285号
    </title>

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    
      <meta name="author" content="Zhongrui Li">
    
    

    <meta name="description" content="1.  cv::Mat Input: pass a copy of Input‘s header, its header will not be changed after this function, but can be changed within the function. For example:    void sillyFunc(cv::Mat Input, cv::Mat&amp;amp;">
<meta property="og:type" content="article">
<meta property="og:title" content="Differences between sending cv::Mat, const cv::Mat, const cv::Mat& or cv::Mat& as arguments to a function | 里士满路1285号">
<meta property="og:url" content="http://yoursite.com/2015/06/26/differences-between-sending-cvmat-const-cvmat-const-cvmat-or-cvmat-as-arguments-to-a-function/index.html">
<meta property="og:site_name" content="里士满路1285号">
<meta property="og:description" content="1.  cv::Mat Input: pass a copy of Input‘s header, its header will not be changed after this function, but can be changed within the function. For example:    void sillyFunc(cv::Mat Input, cv::Mat&amp;amp;">
<meta property="og:updated_time" content="2016-06-24T03:45:50.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Differences between sending cv::Mat, const cv::Mat, const cv::Mat& or cv::Mat& as arguments to a function | 里士满路1285号">
<meta name="twitter:description" content="1.  cv::Mat Input: pass a copy of Input‘s header, its header will not be changed after this function, but can be changed within the function. For example:    void sillyFunc(cv::Mat Input, cv::Mat&amp;amp;">

    
    
      <link rel="icon" type="image/x-icon" href="./images/icon.jpg">
    
    <link rel="stylesheet" href="/css/uno.css">
    <link rel="stylesheet" href="/css/highlight.css">
    <link rel="stylesheet" href="/css/archive.css">
    <link rel="stylesheet" href="/css/china-social-icon.css">

</head>
<body>

    <span class="mobile btn-mobile-menu">
        <i class="icon icon-list btn-mobile-menu__icon"></i>
        <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
    </span>

    

<header class="panel-cover panel-cover--collapsed">


  <div class="panel-main">


    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        
        <a href="/" title="link to homepage for 里士满路1285号"><img src="./images/profile.jpg" width="80" alt="里士满路1285号 logo" class="panel-cover__logo logo" /></a>
        

        <h1 class="panel-cover__title panel-title"><a href="/" title="link to homepage">里士满路1285号</a></h1>
        <hr class="panel-cover__divider" />

        
        <p class="panel-cover__description">
          在此虚度时光
        </p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
        

        <div class="navigation-wrapper">

          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">

              
                
                <li class="navigation__item"><a href="/#blog" title="" class="blog-button">首页</a></li>
              
                
                <li class="navigation__item"><a href="/#about" title="" class="">关于</a></li>
              
                
                <li class="navigation__item"><a href="/#archive" title="" class="">归档</a></li>
              

            </ul>
          </nav>

          <partial('_partials/social') >

        </div>

      </div>

    </div>

    <div class="panel-cover--overlay"></div>
  </div>
</header>


    <div class="content-wrapper">
        <div class="content-wrapper__inner entry">
            

<article class="post-container post-container--single">

  <header class="post-header">
    
    <h1 class="post-title">Differences between sending cv::Mat, const cv::Mat, const cv::Mat&amp; or cv::Mat&amp; as arguments to a function</h1>

    

    <div class="post-meta">
      <time datetime="2015-06-26" class="post-meta__date date">2015-06-26</time> 

      <span class="post-meta__tags tags">

          
            <font class="categories">
            &#8226; 分类:
            <a class="categories-link" href="/categories/OpenCV/">OpenCV</a>
            </font>
          

          

      </span>
    </div>
    
    

  </header>

  <section id="post-content" class="article-content post">
    <div class="post-text"><br><br>1.  <code>cv::Mat Input</code>: pass a copy of <code>Input</code>‘s header, its header will not be changed after this function, but can be changed within the function. For example:<br><br>    <span class="kwd">void</span><span class="pln"> sillyFunc</span><span class="pun">(</span><span class="pln">cv</span><span class="pun">::</span><span class="typ">Mat</span> <span class="typ">Input</span><span class="pun">,</span><span class="pln"> cv</span><span class="pun">::</span><span class="typ">Mat</span><span class="pun">&amp;</span> <span class="typ">Output</span><span class="pun">){</span><br>        <span class="typ">Input</span> <span class="pun">=</span><span class="pln"> cv</span><span class="pun">::</span><span class="typ">Mat</span><span class="pun">::</span><span class="pln">ones</span><span class="pun">(</span><span class="lit">4</span><span class="pun">,</span> <span class="lit">4</span><span class="pun">,</span><span class="pln"> CV_32F</span><span class="pun">);</span> <span class="com">// OK, but only changed within the function</span><br>        <span class="com">//…</span><br>    <span class="pun">}</span><code>&lt;/pre&gt;
2.</code>const cv::Mat Input<code>: pass a copy of</code>Input<code>&#39;s header, its header will not be changed after this function and within the function. For example:
    &lt;pre class=&quot;lang-cpp prettyprint prettyprinted&quot;&gt;</code><span class="kwd">void</span><span class="pln"> sillyFunc</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> cv</span><span class="pun">::</span><span class="typ">Mat</span> <span class="typ">Input</span><span class="pun">,</span><span class="pln"> cv</span><span class="pun">::</span><span class="typ">Mat</span><span class="pun">&amp;</span> <span class="typ">Output</span><span class="pun">){</span><br>        <span class="typ">Input</span> <span class="pun">=</span><span class="pln"> cv</span><span class="pun">::</span><span class="typ">Mat</span><span class="pun">::</span><span class="pln">ones</span><span class="pun">(</span><span class="lit">4</span><span class="pun">,</span> <span class="lit">4</span><span class="pun">,</span><span class="pln"> CV_32F</span><span class="pun">);</span> <span class="com">// Error even change within the function</span><br>        <span class="com">//…</span><br>    <span class="pun">}</span><code>&lt;/pre&gt;
3.</code>const cv::Mat&amp; Input<code>: pass a reference of</code>Input<code>&#39;s header, guarantee that</code>Input<code>&#39;s header will not be changed after the function and within the function. For example:
    &lt;pre class=&quot;lang-cpp prettyprint prettyprinted&quot;&gt;</code><span class="kwd">void</span><span class="pln"> sillyFunc</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> cv</span><span class="pun">::</span><span class="typ">Mat</span><span class="pun">&amp;</span> <span class="typ">Input</span><span class="pun">,</span><span class="pln"> cv</span><span class="pun">::</span><span class="typ">Mat</span><span class="pun">&amp;</span> <span class="typ">Output</span><span class="pun">){</span><br>        <span class="typ">Input</span> <span class="pun">=</span><span class="pln"> cv</span><span class="pun">::</span><span class="typ">Mat</span><span class="pun">::</span><span class="pln">ones</span><span class="pun">(</span><span class="lit">4</span><span class="pun">,</span> <span class="lit">4</span><span class="pun">,</span><span class="pln"> CV_32F</span><span class="pun">);</span> <span class="com">// Error when changing its header</span><br>        <span class="pun">…</span><br>    <span class="pun">}</span><code>&lt;/pre&gt;
4.</code>cv::Mat&amp; Input<code>: pass a reference of</code>Input<code>&#39;s header,</code>Input<code>&#39;s header can be changed after the function and within the function. For example:
    &lt;pre class=&quot;lang-cpp prettyprint prettyprinted&quot;&gt;</code><span class="kwd">void</span><span class="pln"> sillyFunc</span><span class="pun">(</span><span class="pln">cv</span><span class="pun">::</span><span class="typ">Mat</span><span class="pun">&amp;</span> <span class="typ">Input</span><span class="pun">,</span><span class="pln"> cv</span><span class="pun">::</span><span class="typ">Mat</span><span class="pun">&amp;</span> <span class="typ">Output</span><span class="pun">){</span><br>        <span class="typ">Input</span> <span class="pun">=</span><span class="pln"> cv</span><span class="pun">::</span><span class="typ">Mat</span><span class="pun">::</span><span class="pln">ones</span><span class="pun">(</span><span class="lit">4</span><span class="pun">,</span> <span class="lit">4</span><span class="pun">,</span><span class="pln"> CV_32F</span><span class="pun">);</span> <span class="com">// totally OK and does changed</span><br>        <span class="pun">…</span><br>    <span class="pun">}</span><code>&lt;/pre&gt;
    **P.S.2**: I must point out that, for all the four situations (</code>cv::Mat<code>,</code>const cv::Mat<code>,</code>const cv::Mat&amp;<code>or</code>cv::Mat&amp;<code>), they only constrain the access to its header, not to the data it pointers to. For example, you can change its data in all the four situations and its data will indeed change after and within the function:
    &lt;pre class=&quot;lang-cpp prettyprint prettyprinted&quot;&gt;</code><span class="com">/<strong><em> will work for all the four situations </em></strong>/</span><br>    <span class="com">//void sillyFunc(cv::Mat Input){</span><br>    <span class="com">//void sillyFunc(const cv::Mat Input){</span><br>    <span class="com">//void sillyFunc(const cv::Mat &amp;Input){</span><br>    <span class="kwd">void</span><span class="pln"> sillyFunc</span><span class="pun">(</span><span class="pln">cv</span><span class="pun">::</span><span class="typ">Mat</span> <span class="pun">&amp;</span><span class="typ">Input</span><span class="pun">){</span><br>        <span class="typ">Input</span><span class="pun">.</span><span class="pln">data</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span> <span class="pun">=</span> <span class="lit">5</span><span class="pun">;</span> <span class="com">// its data will be changed here</span><br>    <span class="pun">}</span><br><br></div>
  </section>

  
  
</article>


            <footer class="footer">

    <span class="footer__copyright">&copy; 2014-2015. | 由<a href="https://hexo.io/">Hexo</a>强力驱动 | 主题<a href="https://github.com/someus/huno">Huno</a></span>
    
</footer>
        </div>
    </div>

    <!-- js files -->
    <script src="/js/jquery.min.js"></script>
    <script src="/js/main.js"></script>
    <script src="/js/scale.fix.js"></script>


    

    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript"> 
        $(document).ready(function(){
            MathJax.Hub.Config({ 
                tex2jax: {inlineMath: [['[latex]','[/latex]'], ['\\(','\\)']]} 
            });
        });
    </script>


    

    <script src="/js/awesome-toc.min.js"></script>
    <script>
        $(document).ready(function(){
            $.awesome_toc({
                overlay: true,
                contentId: "post-content",
            });
        });
    </script>


    
    <if ( theme.github_repo_widget) {>

    <script src="/js/jquery.githubRepoWidget.min.js"></script>

<}>

    <!--kill ie6 -->
<!--[if IE 6]>
  <script src="//letskillie6.googlecode.com/svn/trunk/2/zh_CN.js"></script>
<![endif]-->

</body>
</html>
